---
title: "Why I'm Switching to Polars Away From Pandas"
subtitle: "Polars is Faster"
author: "Russ Zaliznyak <[rzaliznyak@gmail.com](mailto:rzaliznyak@gmail.com)>"
date: "2025-09-28"
execute: 
  echo: false
format: 
  html: 
    toc: true
    toc-expand: true
    toc-indent: true
---

# Introduction


# Download A Dataset to Local
```{python}
#| echo: true
#| code-fold: show
from numpy.random import binomial
from numpy import mean
from timeit import default_timer
import requests

file_location = "./data/10mb.csv"

# SHAPE OF CSV (9453, 9)
url = "https://raw.githubusercontent.com/frictionlessdata/datasets/main/files/csv/10mb.csv"
with open(file_location, "wb") as f:
    f.write(requests.get(url).content)
```


## Read in CSV with Pandas
```{python}
#| echo: true
#| code-fold: show
NUMBER_SIMULATIONS = int(1e4)
import pandas as pd

all_panda_read_times = []
for j in range(NUMBER_SIMULATIONS):

    start = default_timer()
    df_pandas = pd.read_csv(file_location)

    all_panda_read_times.append(default_timer() - start)

panda_mean_run_time = mean(all_panda_read_times)
print(f"panda mean run-time is {panda_mean_run_time:.4f} secs")



```


## Read in CSV with Polars
```{python}
#| echo: true
#| code-fold: show
import polars as pl

all_polars_read_times = []
for j in range(NUMBER_SIMULATIONS):

    start = default_timer()
    df_polars =pl.read_csv(file_location)

    all_polars_read_times.append(default_timer() - start)

polars_mean_run_time = mean(all_polars_read_times)
print(f"polars mean run-time is {polars_mean_run_time:.4f} secs")

```


## Average Read Speed Improvement

```{python}
#| code-summary: "Code for Comparison of Read-times"
#| echo: true
#| code-fold: true

from numpy import array
import plotly.figure_factory as ff

index_samples = array(all_panda_read_times)/array(all_polars_read_times)
speed_increase_mean = mean(index_samples)

fig = ff.create_distplot(
    [index_samples],
    group_labels=["index_samples"],  
    show_hist=False,              
    show_rug=False,          
)

fig.update_layout(showlegend=False)
fig.show()


```

<br>

On average, we can read CSVs `{python} f"{speed_increase_mean:.2f}"` faster with Polars.